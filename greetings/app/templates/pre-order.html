<html>

<head>
  <title>Checkout</title>
  <script src="https://js.stripe.com/v3/"></script>
  {% load static %}
  <script src="{% static 'main.js' %}"></script>

</head>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Django + Stripe Checkout</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <script src="https://js.stripe.com/v3/"></script>  <!-- new -->
    <script src="{% static 'main.js' %}"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"></script>
  </head>
  <body>

  <section class="section">
    <div class="container">
      <button class="button is-primary" id="submitBtn">Purchase!</button>
    </div>
  </section>



</html>

<script>



function selectOnlyThis(id) {

    if (document.getElementById(id).checked == false) {
      document.getElementById(id).checked  = false;
    }
    else{
    for (var i = 0; i <= 25; i++)
    {
        document.getElementById("Recipient_Check" + i).checked = false;
    }
    document.getElementById(id).checked = true;
    }
}

function selectOnlyThisCategory(id) {

    if (document.getElementById(id).checked == false) {
      document.getElementById(id).checked  = false;
    }

    else{


    document.getElementById(id).checked = true;

    var count = 0;

    for (var i = 1; i <= 8; i++)
    {

        if (document.getElementById("Category_Check" + i).checked)
        {
          count = count + 1;
        }

    }

    if (count > 2)
    {
       for (var i = 1; i <= 8; i++) {
        document.getElementById("Category_Check" + i).checked = false;
        }
    }
    }

}


window.addEventListener("load", () => {
  function sendData() {
    const XHR = new XMLHttpRequest();

    // Bind the FormData object and the form element
    const FD = new FormData(form);

    // Define what happens on successful data submission
    XHR.addEventListener("load", (event) => {
      alert(event.target.responseText);
    });

    // Define what happens in case of error
    XHR.addEventListener("error", (event) => {
      alert('Oops! Something went wrong.');
    });

    // Set up our request
    XHR.open("POST", "http://localhost:49749/happynewyear/submit.py");

    // The data sent is what the user provided in the form
    XHR.send(FD);
  }

  // Get the form element
  const form = document.getElementById("myForm");

  // Add 'submit' event handler
  form.addEventListener("submit", (event) => {
    event.preventDefault();

    sendData();
  });
});


</script>